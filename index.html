<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Math Charts</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="app-container">
        <button class="sidebar-toggle" id="sidebar-toggle" title="Toggle panel">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        </button>
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-icon">f</div>
                <span>3D Math Charts</span>
            </div>

            <div class="section">
                <span class="section-title">Formula z = f(x, y)</span>
                <div class="formula-input-container">
                    <textarea class="formula-input" id="formula-input"
                           placeholder="e.g., sin(x) * cos(y)">sin(sqrt(x*x + y*y))</textarea>
                </div>
            </div>

            <div class="section">
                <span class="section-title">Presets</span>
                <div class="presets-grid" id="presets-grid">
                </div>
            </div>

            <div class="section">
                <span class="section-title">Parameters</span>
                <div class="params-grid">
                    <div class="param-group">
                        <label class="param-label">X Range Min</label>
                        <input type="number" class="param-input" id="x-min" value="-5">
                    </div>
                    <div class="param-group">
                        <label class="param-label">X Range Max</label>
                        <input type="number" class="param-input" id="x-max" value="5">
                    </div>
                    <div class="param-group">
                        <label class="param-label">Y Range Min</label>
                        <input type="number" class="param-input" id="y-min" value="-5">
                    </div>
                    <div class="param-group">
                        <label class="param-label">Y Range Max</label>
                        <input type="number" class="param-input" id="y-max" value="5">
                    </div>
                    <div class="param-group">
                        <label class="param-label">Resolution</label>
                        <input type="number" class="param-input" id="resolution" value="80" min="10" max="200">
                    </div>
                    <div class="param-group">
                        <label class="param-label">Z Scale</label>
                        <input type="number" class="param-input" id="z-scale" value="1" step="0.1">
                    </div>
                </div>
            </div>

            <div class="section">
                <span class="section-title">Appearance</span>
                <div class="color-picker-container" id="color-picker">
                    <div class="color-option active" data-color="0xb8b8bd" style="background: #b8b8bd;"></div>
                    <div class="color-option" data-color="0xffffff" style="background: #ffffff;"></div>
                    <div class="color-option" data-color="0xa855f7" style="background: #a855f7;"></div>
                    <div class="color-option" data-color="0x10b981" style="background: #10b981;"></div>
                    <div class="color-option" data-color="0xf59e0b" style="background: #f59e0b;"></div>
                    <div class="color-option" data-color="0xef4444" style="background: #ef4444;"></div>
                    <div class="color-option" data-color="0xec4899" style="background: #ec4899;"></div>
                    <div class="color-option" data-color="0x06b6d4" style="background: #06b6d4;"></div>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" class="checkbox-input" id="wireframe-toggle" checked>
                    <label class="checkbox-label" for="wireframe-toggle">Wireframe mode</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" class="checkbox-input" id="auto-rotate" checked>
                    <label class="checkbox-label" for="auto-rotate">Auto-rotate</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" class="checkbox-input" id="show-axes" checked>
                    <label class="checkbox-label" for="show-axes">Show axes</label>
                </div>
            </div>

            <button class="generate-btn" id="generate-btn">Generate Chart</button>
        </aside>

        <main class="canvas-container">
            <canvas id="chart-canvas"></canvas>
            <div class="controls-hint">Drag to rotate | Scroll to zoom</div>
            <div class="formula-overlay" id="formula-overlay"></div>
        </main>
    </div>

    <div class="error-toast" id="error-toast">Invalid formula</div>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
